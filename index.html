<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    body { margin: 0; font-family: 'Courier New', monospace; background: #000; color: #0f0; font-size: 3vw; overflow: hidden; }
    .header { text-align: center; font-size: 5vw; margin: 10px; color: #ff0; }
    .section { margin: 20px; }
    .section h2 { color: #ff0; font-size: 4vw; margin-bottom: 10px; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 10px; text-align: center; border-bottom: 1px solid #333; }
    .active { color: #0f0; }
    .scheduled { color: #ff0; animation: blink 2s infinite; }
    .delayed { color: #ff6600; animation: blink 1s infinite; }
    .cancelled { color: #f00; animation: blink 0.5s infinite; }
    @keyframes blink { 50% { opacity: 0.5; } }
  </style>
</head>
<body>
  <div class="header">üõ´ –®–ï–†–ï–ú–ï–¢–¨–ï–í–û (SVO) üõ¨</div>
  
  <div class="section">
    <h2>üì§ –í–´–õ–ï–¢–´</h2>
    <table id="departures">
      <tr><th>–†–µ–π—Å</th><th>–ö—É–¥–∞</th><th>–í—Ä–µ–º—è</th><th>–°—Ç–∞—Ç—É—Å</th></tr>
    </table>
  </div>
  
  <div class="section">
    <h2>üì• –ü–†–ò–õ–Å–¢–´</h2>
    <table id="arrivals">
      <tr><th>–†–µ–π—Å</th><th>–û—Ç–∫—É–¥–∞</th><th>–í—Ä–µ–º—è</th><th>–°—Ç–∞—Ç—É—Å</th></tr>
    </table>
  </div>

  <script>
    const API_KEY = 'a01c8c93edfa06bc5d12e15816ad3035';
    
    async function loadDepartures() {
      try {
        const res = await fetch(`https://api.aviationstack.com/v1/flights?dep_iata=SVO&limit=10&access_key=${API_KEY}`);
        const data = await res.json();
        updateTable('departures', data.data, 'departure');
      } catch(e) { console.error('–í—ã–ª–µ—Ç—ã:', e); }
    }
    
    async function loadArrivals() {
      try {
        const res = await fetch(`https://api.aviationstack.com/v1/flights?arr_iata=SVO&limit=10&access_key=${API_KEY}`);
        const data = await res.json();
        updateTable('arrivals', data.data, 'arrival');
      } catch(e) { console.error('–ü—Ä–∏–ª—ë—Ç—ã:', e); }
    }
    
    function updateTable(tableId, flights, type) {
      const table = document.getElementById(tableId);
      table.querySelector('tbody')?.remove();
      const tbody = table.insertRow().parentNode;
      tbody.innerHTML = '';
      
      flights.slice(0,8).forEach(flight => {
        const status = flight.flight_status || 'scheduled';
        const statusClass = status === 'active' ? 'active' : 
                           status.includes('delay') ? 'delayed' : 
                           status === 'cancelled' ? 'cancelled' : 'scheduled';
        
        const time = new Date(flight[type]?.scheduled || flight.departure?.scheduled).toLocaleTimeString('ru-RU', {hour: '2-digit', minute: '2-digit'});
        const city = flight.arrival?.airport || flight.departure?.airport || 'N/A';
        const flightNum = flight.flight?.iata || flight.flight?.icao || 'N/A';
        
        const row = tbody.insertRow();
        row.innerHTML = `
          <td>${flightNum}</td>
          <td>${city}</td>
          <td>${time}</td>
          <td class="${statusClass}">${status.toUpperCase()}</td>
        `;
      });
    }
    
    // –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    loadDepartures();
    loadArrivals();
    setInterval(() => { loadDepartures(); loadArrivals(); }, 60000);
  </script>
</body>
</html>
