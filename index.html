<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Berlin BER - Real Flights</title>
    <!-- Все стили из предыдущего кода остаются -->
</head>
<body>
    <!-- HTML структура из предыдущего кода -->

    <script>
        const API_KEY = 'b678f9df-013d-46f0-b536-d5a8be6a3428';
        
        async function fetchBerlinFlights() {
            try {
                // CORS прокси + бесплатный endpoint
                const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(
                    `https://airlabs.co/api/v9/flights?api_key=${API_KEY}`
                )}`;
                
                const response = await fetch(proxyUrl);
                const proxyData = await response.json();
                const data = JSON.parse(proxyData.contents);
                
                if (data.response && data.response.length > 0) {
                    // Фильтруем рейсы Берлина
                    const berlinFlights = data.response.filter(flight => 
                        flight.dep_iata === 'BER' || flight.arr_iata === 'BER'
                    );
                    
                    displayRealFlights(berlinFlights.slice(0, 10));
                    return true;
                }
            } catch (error) {
                console.log('API недоступен, использую демо');
                displayDemoFlights();
                return false;
            }
        }
        
        window.addEventListener('load', fetchBerlinFlights);
    </script>
</body>
</html>
